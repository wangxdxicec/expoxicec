// JavaScript Document
(function(n,t,i){"use strict";function l(i){var l=u,s=l.steps[r],a=l._element.find(s.wrapper),h=ct(a),v,c;if(s.popup.type!=="modal"&&!a.length){if(s.popup.fallback==="skip"||typeof s.popup.fallback=="undefined"){o[i]();return}s.popup.type=s.popup.fallback}v=h[0].scrollHeight-h.outerHeight();c=s.autoScroll!==!1?s.popup.type==="modal"?0:Math.floor(a.offset().top-n(t).height()/2+h.scrollTop()):h.scrollTop();h.scrollTop()!==c&&(h.scrollTop()===v&&c<v||c<=0&&h.scrollTop()>0||c>0)?(f.addClass("jpw-scrolling"),e.fadeOut("fast"),h.clearQueue().animate({scrollTop:c},l.steps[r].scrollSpeed,ut)):ut()}function ut(){f.removeClass("jpw-scrolling");var c=u,t=c.steps[r],i,h,o;if(c.steps[r]=n.extend(!0,{},n.fn.pagewalkthrough.defaults.steps[0],t),i=c._element.find(t.wrapper),h=ct(i),d.show(),t.popup.type!=="modal"&&t.popup.type!=="nohighlight"){if(f.html(""),t.wrapper===""||typeof t.wrapper=="undefined"){ot('Your walkthrough position is: "'+t.popup.type+'" but wrapper is empty or undefined. Please check your "'+s+'" wrapper parameter.');return}o=h.outerHeight()-i.offset().top+h.offset().top+h.scrollTop();o=o<=0?i.outerHeight():o;d.appendTo(f);n("<div>").addClass("overlay-hole").height(Math.min(o,i.outerHeight())+30).width(i.outerWidth()+30).css({padding:"20px",position:"absolute",top:i.offset().top-15,left:i.offset().left-15,"z-index":999998,"box-shadow":"0 0 1px 10000px rgba(0, 0, 0, 0.6)"}).append(n("<div>").css({position:"absolute",top:0,bottom:0,left:0,right:0})).appendTo(f);n("#jpWalkthrough").length&&n("#jpWalkthrough").remove();f.appendTo("body").show();e.show();at()}else t.popup.type==="modal"?(n("#jpWalkthrough").length&&n("#jpWalkthrough").remove(),lt()):n("#jpWalkthrough").length&&n("#jpWalkthrough").remove();w("jpwPrevious");w("jpwNext");w("jpwFinish")}function lt(){var h=u,t=h.steps[r],o,s;d.appendTo("body").show().removeClass("transparent");o=st(parseInt(t.popup.contentRotation,10));e.css({position:"absolute",left:"50%",top:"calc("+n(i).scrollTop()+"px + 25%)","margin-left":-(parseInt(t.popup.width,10)+60)/2+"px","z-index":"999999"});s=n('<div id="tooltipTop"><div id="topLeft"><\/div><div id="topRight"><\/div><\/div><div id="tooltipInner"><\/div><div id="tooltipBottom"><div id="bottomLeft"><\/div><div id="bottomRight"><\/div><\/div>');f.html("");e.html("").append(s).wrapInner(n("<div />",{id:"tooltipWrapper",style:"width:"+a(parseInt(t.popup.width,10)+30)})).append('<div id="bottom-scratch"><\/div>').appendTo(f);f.appendTo("body");e.show();n("#tooltipWrapper").css(o);n("#tooltipInner").append(ft(t)).show();f.show()}function at(){var w=u,t=w.steps[r],o,s,h,c,y=n("#jpWalkthrough .overlay-hole").outerWidth(),b=n("#jpWalkthrough .overlay-hole").outerHeight(),l=n("#jpWalkthrough .overlay-hole").offset().top,v=n("#jpWalkthrough .overlay-hole").offset().left,i=30,k=typeof t.popup.contentRotation=="undefined"||parseInt(t.popup.contentRotation,10)===0?wt():st(parseInt(t.popup.contentRotation,10)),p;n("#jpwOverlay").length&&n("#jpwOverlay").addClass("transparent");p=n('<div id="tooltipTop"><div id="topLeft"><\/div><div id="topRight"><\/div><\/div><div id="tooltipInner"><\/div><div id="tooltipBottom"><div id="bottomLeft"><\/div><div id="bottomRight"><\/div><\/div>');e.html("").css({"margin-left":"0","margin-top":"0",position:"absolute","z-index":"999999"}).append(p).wrapInner(n("<div />",{id:"tooltipWrapper",style:"width:"+a(parseInt(t.popup.width,10)+30)})).appendTo(f);f.appendTo("body").show();n("#tooltipWrapper").css(k);n("#tooltipInner").append(ft(t)).show();e.append('<span class="'+t.popup.position+'">&nbsp;<\/span>');switch(t.popup.position){case"top":o=l-(e.height()+i/2)+parseInt(t.popup.offsetVertical,10)-86;s=v+y/2-e.width()/2-5+parseInt(t.popup.offsetHorizontal,10);c=e.width()/2-i+parseInt(t.popup.offsetArrowHorizontal,10);h=t.popup.offsetArrowVertical?parseInt(t.popup.offsetArrowVertical,10):"";break;case"right":o=l-i/2+parseInt(t.popup.offsetVertical,10);s=v+y+i/2+parseInt(t.popup.offsetHorizontal,10)+105;h=i+parseInt(t.popup.offsetArrowVertical,10);c=t.popup.offsetArrowHorizontal?parseInt(t.popup.offsetArrowHorizontal,10):"";break;case"bottom":o=l+b+parseInt(t.popup.offsetVertical,10)+86;s=v+y/2-e.width()/2-5+parseInt(t.popup.offsetHorizontal,10);c=e.width()/2-i+parseInt(t.popup.offsetArrowHorizontal,10);h=t.popup.offsetArrowVertical?parseInt(t.popup.offsetArrowVertical,10):"";break;case"left":o=l-i/2+parseInt(t.popup.offsetVertical,10);s=v-e.width()-i+parseInt(t.popup.offsetHorizontal,10)-105;h=i+parseInt(t.popup.offsetArrowVertical,10);c=t.popup.offsetArrowVertical?parseInt(t.popup.offsetArrowHorizontal,10):""}n("#jpwTooltip span."+t.popup.position).css({top:a(h),left:a(c)});e.css({top:a(o),left:a(s)});f.show()}function ft(t){var i=t.popup.content,r;try{r=n("body").find(i).html()}catch(u){}return r||i}function w(t,i){if(!n("#"+t).length){var r=u.buttons[t],f;r&&(typeof r.show!="function"||r.show())&&r.show&&(f=n("<a />",{id:t,html:r.i18n}),i?n(i).append(f):n("#tooltipWrapper").after(f))}}function vt(n){for(var t=0;t<v.length;t++)typeof n[v[t]].onCookieLoad=="function"&&n[v[t]].onCookieLoad.call(this);return!1}function nt(n){var t=u;return typeof t.steps[r].onLeave=="function"&&t.steps[r].onLeave.call(this,n,r)===!1?!1:!0}function b(n){var t=u;return typeof t.steps[r].onEnter=="function"?t.steps[r].onEnter.call(this,n,r)!==!1:!0}function yt(n){var t=u;return(h=!0,o.restart(n),typeof t.onRestart=="function"&&t.onRestart.call(this)===!1)?!1:!0}function pt(){var n=u||{};return(r=0,typeof n.onBeforeShow=="function"&&n.onBeforeShow.call(this)===!1)?!1:!0}function et(){var n=u;return(r=0,typeof n.onAfterShow=="function"&&n.onAfterShow.call(this)===!1)?!1:!0}function ot(n){t.console&&t.console.log&&t.console.log(n)}function wt(){return{"-webkit-transform":"none","-moz-transform":"none","-o-transform":"none",filter:"none","-ms-transform":"none"}}function st(n){var r,u,f,e,i,t;return i=Math.PI/180,t=n*i,r=Math.cos(t),u=Math.sin(t),f=Math.sin(t),e=Math.cos(t),{"-webkit-transform":"rotate("+parseInt(n,10)+"deg)","-moz-transform":"rotate("+parseInt(n,10)+"deg)","-o-transform":"rotate("+parseInt(n,10)+"deg)","-ms-transform":"rotate("+parseInt(n,10)+"deg)"}}function a(n){return typeof n=="string"?n.toLowerCase().indexOf("px")===-1?n+"px":n:n+"px"}function bt(n,t,r){var u=new Date,f;u.setDate(u.getDate()+r);f=encodeURIComponent(t)+(r==null?"":"; expires="+u.toUTCString());i.cookie=[n,"=",f].join("")}function ht(n){for(var u,f,r=i.cookie.split(";"),t=0;t<r.length;t++)if(u=r[t].substr(0,r[t].indexOf("=")),f=r[t].substr(r[t].indexOf("=")+1),u=u.replace(/^\s+|\s+$/g,""),u===n)return decodeURIComponent(f)}function tt(){return r===u.steps.length-1}function k(){return r===0}function ct(t){t instanceof n||(t=n(t));t=t.first();var i=t.css("position"),u=i==="absolute",r=t.parents().filter(function(){var t=n(this);return u&&t.css("position")==="static"?!1:/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return i==="fixed"?n():r.length?r:n("html, body")}var c={},v=[],u,s,it=!0,y=0,g,p=!0,rt=!0,r=0,h=!1,d=n('<div id="jpwOverlay"><\/div>'),f=n('<div id="jpWalkthrough"><\/div>'),e=n('<div id="jpwTooltip"><\/div>'),o={isActive:function(){return!!h},index:function(n){return typeof n!="undefined"&&(r=n),r},init:function(t){t=n.extend(!0,{},n.fn.pagewalkthrough.defaults,t);var i=this;if(!t.name)throw new Error("Must provide a unique name for a tour");return this.first().data("jpw",t),t._element=this,this.each(function(n){t=t||{};t.elementID=t.name;c[t.name]=t;v.push(t.name);t.onLoad&&y++;y===1&&rt&&(s=t.name,u=c[s],rt=!1);n+1===i.length&&y===0&&(s=t.name,u=c[v[0]],it=!1)})},renderOverlay:function(){if(y>1&&ot("Warning: Only 1st walkthrough will be shown onLoad as default"),g=ht("_walkthrough-"+s),typeof g=="undefined"){if(h=!0,!b())return;l();w("jpwClose","body");setTimeout(function(){k()&&p&&!et()},100)}else vt(c)},restart:function(n){k()||(r=0,yt(n)&&b(n))&&l()},close:function(){var t=u;nt(!0);typeof t.onClose=="function"&&t.onClose.call(this);r=0;p=!0;h=!1;bt("_walkthrough-"+s,0,365);g=ht("_walkthrough-"+s);d.fadeOut("slow",function(){n(this).remove()});f.fadeOut("slow",function(){n(this).html("").remove()});n("#jpwClose").fadeOut("slow",function(){n(this).remove()})},show:function(n,t){(t=n==null?n:t,n=n||this.first().data("jpw").name,u=c[this.first().data("jpw").name],(n!==s||!h)&&b(t))&&(h=!0,p=!0,pt())&&(l(),w("jpwClose","body"),k()&&p&&!et())},next:function(n){(p=!1,!tt()&&nt(n))&&(r=parseInt(r,10)+1,b(n)||o.next(),l("next"))},prev:function(n){!k()&&nt(n)&&(r=parseInt(r,10)-1,b(n)||o.prev(),l("prev"))},getOptions:function(n){var t,i;if(n)t=h?u:!1;else{t=[];for(i in c)t.push(c[i])}return t},refresh:function(){l("next")}};n(i).on("click","#jpwClose, #jpwFinish",o.close);n(i).on("click","#jpwNext",function(){n.pagewalkthrough("next")});n(i).on("click","#jpwPrevious",function(){n.pagewalkthrough("prev")});n(i).on("click","#jpwOverlay, #jpwTooltip",function(n){n.stopPropagation();n.stopImmediatePropagation()});n(t).resize(function(){h&&n.pagewalkthrough("refresh")});n.pagewalkthrough=n.fn.pagewalkthrough=function(t){if(o[t])return o[t].apply(this,[].slice.call(arguments,1));typeof t!="object"&&t?n.error("Method "+t+" does not exist on jQuery.pagewalkthrough"):(o.init.apply(this,arguments),it&&y<2&&setTimeout(function(){o.renderOverlay()},500))};n.fn.pagewalkthrough.defaults={steps:[{wrapper:"",popup:{content:"",type:"modal",position:"top",offsetHorizontal:0,offsetVertical:0,offsetArrowHorizontal:0,offsetArrowVertical:0,width:"320",contentRotation:0,fallback:"skip"},autoScroll:!0,scrollSpeed:1e3,onEnter:n.noop,onLeave:n.noop}],name:null,onLoad:!0,onBeforeShow:n.noop,onAfterShow:n.noop,onRestart:n.noop,onClose:n.noop,onCookieLoad:n.noop,buttons:{jpwClose:{i18n:"关闭向导",show:!0},jpwNext:{i18n:'<i class="fa fa-arrow-circle-right fa-2x"><\/i>',show:function(){return!tt()}},jpwPrevious:{i18n:'<i class="fa fa-arrow-circle-left fa-2x"><\/i>',show:function(){return!k()}},jpwFinish:{i18n:'<i class="fa fa-check-circle fa-2x"><\/i>',show:function(){return tt()}}}}})(jQuery,window,document)